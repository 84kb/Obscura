# Obscura ユーザーガイド

このガイドでは、Obscuraの詳しい使い方について解説します。

## 目次

1. [はじめに](#はじめに)
2. [ライブラリの管理](#1-ライブラリの管理)
3. [メディアのインポート](#2-メディアのインポート)
4. [メディアの整理（フォルダーとタグ）](#3-メディアの整理フォルダーとタグ)
5. [閲覧モードと再生](#4-閲覧モードと再生)
6. [便利な機能](#5-便利な機能)

---

## はじめに

Obscuraは、大量の動画や音声ファイルを効率的に管理・閲覧するための「ライブラリ型」メディアプレイヤーです。画像管理ソフトのような感覚で、動画や音声を直感的に整理できます。

## 1. ライブラリの管理

Obscuraは全てのデータを「ライブラリ」という単位で管理します。ライブラリはフォルダとしてPC上に保存され、その中にインポートしたファイルやデータベースが格納されます。

### 新しいライブラリを作成する
1. サイドバー左上のメニューボタン（現在のライブラリ名が表示されている部分）をクリックします。
2. 「新しいライブラリを作成...」を選択します。
3. 保存場所とライブラリ名（例: `MyVideos`）を入力して作成します。
4. 指定した場所に `MyVideos.library` というフォルダが作成され、自動的にそのライブラリに切り替わります。

### ライブラリを切り替える・開く
- メニューから「既存のライブラリを開く...」を選択し、過去に作成した `.library` フォルダを選択すると、そのライブラリを開くことができます。
- 履歴にあるライブラリは、メニューのリストから直接クリックして切り替えることができます。

## 2. メディアのインポート

### ドラッグ＆ドロップで追加
- エクスプローラーから動画や音声ファイルを、Obscuraのウィンドウ内にドラッグ＆ドロップするとインポートが開始されます。
- フォルダごとドロップすることも可能です。

### インポートの仕様
- ファイルはライブラリフォルダ内の `images` フォルダにコピー（または移動）されます。
- 元のファイル名を維持しつつ、サムネイル画像や動画の長さ、サイズなどのメタデータが自動的に取得されます。
- **ドットファイル対応**: `.video.mp4` のようなファイル名のファイルもインポート可能です（`.git` や `node_modules` などシステムに関わるものは除外されます）。

## 3. メディアの整理（フォルダーとタグ）

### フォルダー (Folders)
サイドバーでPCのフォルダ階層のような構造を作成してファイルを整理できます。

- **作成**: サイドバーの「＋」ボタンをクリックすると、新しいフォルダーが作成されます。
  - 基本的にルート（最上位）に作成されます。
- **サブフォルダー**: フォルダーを右クリックして「新しいサブフォルダーを作成」を選ぶと、階層構造を作ることができます。
- **移動**: 作成したフォルダーはドラッグ＆ドロップで並び替えたり、他のフォルダーの中に入れたりすることができます。
- **分類**: メイン画面のファイルをドラッグして、サイドバーのフォルダーにドロップすると、そのフォルダーに分類されます。

### タグ (Tags)
ファイルに属性を付与して管理できます。

- **タグの追加**: 
  - メディアを選択し、右側のインスペクタパネルにある「タグ」欄に入力して追加します。
  - タグ一覧画面（サイドバーの「すべてのタグ」）から新規作成も可能です。
- **クイックタグ**: よく使うタグは設定画面で「クイックタグ」として登録しておくと、数字キーなどで瞬時にタグ付けが可能です。

## 4. リモートライブラリ（ネットワーク共有）

Obscuraは同じネットワーク上の別のPCにあるライブラリに接続することができます。

### ホスト側（サーバー）の設定
ライブラリを公開するPCでの操作です。
1. 設定画面 (`Ctrl+,`) を開き、「ネットワーク共有」タブを選択します。
2. 「ホスト設定」タブで「ネットワーク共有を有効にする」をONにします。
3. **ユーザー管理**: 接続を許可するクライアントのために、アクセストークンを発行します。
   - クライアント側から「ユーザートークン」を受け取り、それを入力して「発行」します。
   - 発行された「アクセストークン」をクライアント側に伝えます。
   - 権限（閲覧のみ、編集可など）を詳細に設定できます。

### クライアント側（接続）の設定
他のPCのライブラリを見たいPCでの操作です。
1. 設定画面 (`Ctrl+,`) の「ネットワーク共有」 > 「クライアント設定」タブを開きます。
2. 「自分のユーザートークン」をコピーし、ホスト管理者に送ります。
3. ホストから受け取った「アクセストークン」と、ホストの「URL（IPアドレス:ポート）」を入力して「接続テスト」を行います。
4. 接続に成功したら「追加」ボタンを押すと、サイドバーにリモートライブラリとして追加されます。

## 5. 閲覧モードと再生

### インスペクタ (Inspector)
画面右側のパネルで、選択中のファイルの詳細情報を確認・編集できます。
- **プレビュー**: 上部に大きなサムネイルが表示され、マウスホバーで簡易再生（ホバー再生）ができます。
- **情報編集**: タイトル、メモ、URL、評価（星）、タグなどを編集できます。

### 再生
- ファイルをダブルクリックするとプレイヤーモードになり、動画/音声が再生されます。
- **ループ再生**: プレイヤー下部のループボタンで、1曲リピートや全曲リピートを切り替えられます。
- **ショートカット**: スペースキーで一時停止/再生などが可能です。

## 5. 便利な機能

### 重複ファイルの検索
ライブラリ内に同じファイルが重複していないかチェックできます。
1. ヘッダー右上のメニューボタン（三点リーダー `...` ではない方のメニューアイコン）をクリックします。
2. 「重複を検索」を選択します。
3. サイズや名前が一致するファイルが見つかった場合、解決画面が表示され、不要なファイルを削除できます。

### スマートブラウジング
サイドバーには自動分類機能があります。
- **すべて**: 全てのファイルを表示。
- **未分類**: フォルダーに割り当てられていないファイルを表示。整理が必要なファイルを素早く見つけられます。
- **タグなし**: タグが付いていないファイルを表示。
- **最近使用**: 最近インポートまたは再生したファイルを表示。
- **ランダム**: ライブラリからランダムにファイルを表示。何を見るか迷った時に便利です。
- **ゴミ箱**: 削除したファイルは一時的にここに移動します。完全に削除するか、復元するかを選べます。

### 並び替え設定の保存
フォルダーごとに、リストの並び順（名前順、日付順など）を保存できます。一度設定した並び順は、次回そのフォルダーを開いた時も維持されます。
